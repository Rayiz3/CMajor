---
layout: page
# All the Categories of posts
---

{% include lang.html %}

{% assign HEAD_PREFIX = 'h_' %}
{% assign LIST_PREFIX = 'l_' %}

{% assign group_index = 0 %}
<!--
site.categories = {
  "category1" => [post1, post2, post3 ...],
  "category2" => [post4, post5 ...],
  ...
}
-->
{% assign sort_categories = site.categories | sort %}

<!-- category : "category1" => [post1, post2, post3 ...] -->
{% for category in sort_categories %}
  {% assign category_code = category | first %}  <!-- "category1" -->
  {% assign posts_of_category = category | last %} <!-- [post1, post2, post3 ...] -->
  {% assign first_post = posts_of_category | first %} <!-- post1 -->

  {% if category_code == first_post.categories[0] %}
    {% assign sub_categories = '' | split: '' %}

    {% for post in posts_of_category %}
      {% assign second_category = post.categories[1] %}
      {% if second_category %}
        {% unless sub_categories contains second_category %}
          {% assign sub_categories = sub_categories | push: second_category %}
        {% endunless %}
      {% endif %}
    {% endfor %}

    {% assign sub_categories = sub_categories | sort %}
    {% assign sub_categories_size = sub_categories | size %}

    <div class="card categories">
      {% assign category_code_slug = category_code | slugify %}
      {% assign category_data = site.data.categories[category_code_slug] %}
      {% capture _category_url %}/categories/{{ category_code_slug | url_encode }}/{% endcapture %}
      <a
        id="{{ HEAD_PREFIX }}{{ group_index }}"
        class="card-header d-flex flex-column align-items-center justify-content-between hide-border-bottom"
        href="{{ _category_url | relative_url }}"
      >
        <!-- thumbnail -->
        <img src="{{ category_data.image | relative_url }}" alt="{{ category_data.alt }}">

        <div class="label d-flex flex-column align-items-center justify-content-center gap-1">

          <!-- title -->
          <span class="title">{{ category_data.title }}</span>

          <!-- content count -->
          {% assign top_posts_size = site.categories[category_code] | size %}
          <span class="counts">
            {% if sub_categories_size > 0 %}
              {{ sub_categories_size }}
              {% if sub_categories_size > 1 %}
                {{
                  site.data.locales[lang].categories.category_measure.plural
                  | default: site.data.locales[lang].categories.category_measure
                }}
              {% else %}
                {{
                  site.data.locales[lang].categories.category_measure.singular
                  | default: site.data.locales[lang].categories.category_measure
                }}
              {% endif -%}
              ,
            {% endif %}

            {{ top_posts_size }}

            {% if top_posts_size > 1 %}
              {{
                site.data.locales[lang].categories.post_measure.plural
                | default: site.data.locales[lang].categories.post_measure
              }}
            {% else %}
              {{
                site.data.locales[lang].categories.post_measure.singular
                | default: site.data.locales[lang].categories.post_measure
              }}
            {% endif %}
          </span>
        </div>
      </a>
      <!-- .card-header -->
    </div>
    <!-- .card -->

    {% assign group_index = group_index | plus: 1 %}
  {% endif %}
{% endfor %}
